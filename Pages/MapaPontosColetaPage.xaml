<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:maps="clr-namespace:Microsoft.Maui.Controls.Maps;assembly=Microsoft.Maui.Controls.Maps"
             x:Class="Rba.Pages.MapaPontosColetaPage"
             Title="Mapa Pontos de Coleta">

    <!-- Grid com 3 linhas: Picker, Mapa, Botões -->
    <Grid RowDefinitions="Auto,*,Auto">

        <!-- Picker de filtro -->
        <Picker x:Name="TipoPicker"
                Title="Selecione o tipo de resíduo"
                SelectedIndexChanged="TipoPicker_SelectedIndexChanged"
                Grid.Row="0"
                Margin="10">
            <Picker.Items>
                <x:String>Todos</x:String>
                <x:String>Plástico</x:String>
                <x:String>Papel</x:String>
                <x:String>Vidro</x:String>
                <x:String>Metal</x:String>
                <x:String>Orgânico</x:String>
                <x:String>Não reciclável</x:String>
                <x:String>Madeira</x:String>
                <x:String>Resíduos Perigosos</x:String>
                <x:String>Hospitalar</x:String>
                <x:String>Radioativos</x:String>
            </Picker.Items>
        </Picker>

        <!-- Mapa interativo -->
        <maps:Map x:Name="mapa"
                  Grid.Row="1"
                  IsShowingUser="true"
                  MapType="Street"
                  VerticalOptions="FillAndExpand"
                  HorizontalOptions="FillAndExpand" />

        <!-- Painel de botões -->
        <ScrollView Orientation="Horizontal"
                    Grid.Row="2"
                    HorizontalOptions="Fill"
                    VerticalOptions="Start"
                    BackgroundColor="#80000000"
                    Padding="10">

            <StackLayout Orientation="Horizontal"
                         Spacing="10">

                <Button Text="Minha Localização"
                        WidthRequest="170"
                        Clicked="Button_MinhaLocalizacao_Clicked"
                        Background="{StaticResource PrimaryBrush}"
                        TextColor="{StaticResource White}"/>

                <Button Text="Pontos Próximos"
                        WidthRequest="170"
                        Clicked="Button_PontosProximos_Clicked"
                        Background="{StaticResource PrimaryBrush}"                     
                        TextColor="{StaticResource White}" />

                <!-- Esse botão pode ser removido se o Picker já faz o filtro
                ver se não teremos problemas antes de remover -->
                <!--<Button Text="Filtrar Tipo"
                        WidthRequest="170"
                        Clicked="Button_FiltrarTipo_Clicked"
                        Background="{StaticResource PrimaryBrush}"
                        TextColor="{StaticResource White}"/>-->

                <Button Text="Voltar"
                        WidthRequest="170"
                        Clicked="Button_Voltar"
                        Background="{StaticResource PrimaryBrush}"
                        TextColor="{StaticResource White}"/>
            </StackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
